
---
// Projects component
const projects = [
  
    {
        id: -1,
        title: 'KIN: A Festival of Memory and Imagination',
        roleTitle: 'Technical Floor Manager',
        techUsed: 'XR, AR, A/V Engineering, Touchdesigner, MadMapper,  Omnidirectional Audio, Multi-Projection Mapping',
        links: [{link: 'https://www.kinfolktech.org/', text: 'Kinfolk Tech Website'}, 
        {link: "https://www.kinfolktech.org/exhibitions/kin-festival", text: "Kinfolk Festival"}, 
        {link: "https://www.nytimes.com/2025/10/29/arts/design/james-baldwin-ai-typewriter.html", text: "NY Times Press"},
        {link: "https://agog.org/event/kin-a-festival-of-memory-and-imagination/", text: "Agog Guide"},
     ],
      description: 'An immersive AR exhibition with Kinfolk that transforms spaces into living archives, honoring underrepresented historical figures through digital monuments and interactive storytelling.',
     gallery: [
        {original: "/img/kin1.jpg", type: "image"},
        {original: "/img/kin2.jpg", type: "image"},
        {original: "/img/kin3.png", type: "image"},
        {original: "/img/kin4.webp", type: "image"},
     ] ,
     details: `
    Kinfolk is an immersive AR exhibition that transforms spaces into living archives, honoring underrepresented historical figures through digital monuments and interactive storytelling.
    <br><br>
    I served as Technical Floor Manager, overseeing the setup, maintenance, and takedown of this large-scale production. My responsibilities included ensuring the technical integrity of all installations, which spanned a wide range of mediums and technologies. These involved extensive use of TouchDesigner, Arduino, XR/AR systems, omnidirectional audio, and complex multi-projection mapping.
    <br><br>
    This exhibition attracted thousands, of attendees and garnered press coverage from New York Times. Beyond its scale and visibility, the project demanded both detailed artist management and rapid, real-time troubleshooting.
    `,
    imageUrl: '/img/kin1.jpg',
    },
   { 
    id: 0, 
    title: 'Tribeca Immersive 2025', 
    roleTitle: 'Technical Floor Manager',
    links: [{link: 'https://tribecafilm.com/festival/immersive', text: 'Festival Guide'}, {link: 'https://www.onx.studio/onx-programming/tribeca-immersive-2025', text: 'ONX Guide'}, {link: 'https://agog.org/tribeca-immersive-2025/', text: 'Agog Guide'}, {link: 'https://www.cbsnews.com/news/2025-tribeca-festival-virtual-reality-augmented-reality-exhibitions/', text: 'CBS News Press'}],
    techUsed: 'VR, XR, AR, Touchdesigner, Arduino, Haptic Immersive Suits, Omnidirectional Audio, Multi-Projection Mapping',
    description: 'An immersive exhibition of VR, XR, and AR experiences presented at the Tribeca Film Festival. 11 Installations lined the halls of a massive space in the heart of New York\'s Financial District.', 
    details: `Described as a “genre-defying exhibition,” this collection of eleven immersive experiences marked the culmination of a year-long collaboration with ONX Onassis. I served as Technical Floor Manager, overseeing the setup, maintenance, and takedown of this large-scale production. My responsibilities included ensuring the technical integrity of all installations, which spanned a wide range of mediums and technologies. These involved extensive use of TouchDesigner, Arduino, VR/XR/AR systems, haptic immersive suits, omnidirectional audio, and complex multi-projection mapping—including a projector suspended 30 feet in the air, casting imagery onto a life-sized loom.
<br><br>
This exhibition attracted hundreds, if not thousands, of attendees and garnered press coverage from outlets including CBS News, New York Theater, Surface Magazine, and Variety. Beyond its scale and visibility, the project demanded both detailed artist management and rapid, real-time troubleshooting. Challenges ranged from recovering after an unexpected power surge that disabled multiple computers, to navigating faulty Arduino hardware, maintaining delicate haptic suits, and ensuring the daily technical stability of each installation. This experience represented a true culmination of the emerging technologies I have been deeply engaged with—spanning interactive systems, immersive media, and responsive environments.`,
    imageUrl: '/img/tribecaImmersive.webp',
    gallery: [
      {original: "/img/ti1.webp", type: "image"}, 
      {original: "/img/ti2.webp", type: "image"}, 
      {original: "/img/ti3.webp", type: "image"}, 
      {original: "/img/ti4.webp", type: "image"},
     ],
     video: [{original: `<blockquote class="instagram-media" data-instgrm-captioned data-instgrm-permalink="https://www.instagram.com/reel/DLaW8p1glzm/?utm_source=ig_embed&amp;utm_campaign=loading" data-instgrm-version="14" style=" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:540px; min-width:326px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);"><div style="padding:16px;"> <a href="https://www.instagram.com/reel/DLaW8p1glzm/?utm_source=ig_embed&amp;utm_campaign=loading" style=" background:#FFFFFF; line-height:0; padding:0 0; text-align:center; text-decoration:none; width:100%;" target="_blank"> <div style=" display: flex; flex-direction: row; align-items: center;"> <div style="background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 40px; margin-right: 14px; width: 40px;"></div> <div style="display: flex; flex-direction: column; flex-grow: 1; justify-content: center;"> <div style=" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; margin-bottom: 6px; width: 100px;"></div> <div style=" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; width: 60px;"></div></div></div><div style="padding: 19% 0;"></div> <div style="display:block; height:50px; margin:0 auto 12px; width:50px;"><svg width="50px" height="50px" viewBox="0 0 60 60" version="1.1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-511.000000, -20.000000)" fill="#000000"><g><path d="M556.869,30.41 C554.814,30.41 553.148,32.076 553.148,34.131 C553.148,36.186 554.814,37.852 556.869,37.852 C558.924,37.852 560.59,36.186 560.59,34.131 C560.59,32.076 558.924,30.41 556.869,30.41 M541,60.657 C535.114,60.657 530.342,55.887 530.342,50 C530.342,44.114 535.114,39.342 541,39.342 C546.887,39.342 551.658,44.114 551.658,50 C551.658,55.887 546.887,60.657 541,60.657 M541,33.886 C532.1,33.886 524.886,41.1 524.886,50 C524.886,58.899 532.1,66.113 541,66.113 C549.9,66.113 557.115,58.899 557.115,50 C557.115,41.1 549.9,33.886 541,33.886 M565.378,62.101 C565.244,65.022 564.756,66.606 564.346,67.663 C563.803,69.06 563.154,70.057 562.106,71.106 C561.058,72.155 560.06,72.803 558.662,73.347 C557.607,73.757 556.021,74.244 553.102,74.378 C549.944,74.521 548.997,74.552 541,74.552 C533.003,74.552 532.056,74.521 528.898,74.378 C525.979,74.244 524.393,73.757 523.338,73.347 C521.94,72.803 520.942,72.155 519.894,71.106 C518.846,70.057 518.197,69.06 517.654,67.663 C517.244,66.606 516.755,65.022 516.623,62.101 C516.479,58.943 516.448,57.996 516.448,50 C516.448,42.003 516.479,41.056 516.623,37.899 C516.755,34.978 517.244,33.391 517.654,32.338 C518.197,30.938 518.846,29.942 519.894,28.894 C520.942,27.846 521.94,27.196 523.338,26.654 C524.393,26.244 525.979,25.756 528.898,25.623 C532.057,25.479 533.004,25.448 541,25.448 C548.997,25.448 549.943,25.479 553.102,25.623 C556.021,25.756 557.607,26.244 558.662,26.654 C560.06,27.196 561.058,27.846 562.106,28.894 C563.154,29.942 563.803,30.938 564.346,32.338 C564.756,33.391 565.244,34.978 565.378,37.899 C565.522,41.056 565.552,42.003 565.552,50 C565.552,57.996 565.522,58.943 565.378,62.101 M570.82,37.631 C570.674,34.438 570.167,32.258 569.425,30.349 C568.659,28.377 567.633,26.702 565.965,25.035 C564.297,23.368 562.623,22.342 560.652,21.575 C558.743,20.834 556.562,20.326 553.369,20.18 C550.169,20.033 549.148,20 541,20 C532.853,20 531.831,20.033 528.631,20.18 C525.438,20.326 523.257,20.834 521.349,21.575 C519.376,22.342 517.703,23.368 516.035,25.035 C514.368,26.702 513.342,28.377 512.574,30.349 C511.834,32.258 511.326,34.438 511.181,37.631 C511.035,40.831 511,41.851 511,50 C511,58.147 511.035,59.17 511.181,62.369 C511.326,65.562 511.834,67.743 512.574,69.651 C513.342,71.625 514.368,73.296 516.035,74.965 C517.703,76.634 519.376,77.658 521.349,78.425 C523.257,79.167 525.438,79.673 528.631,79.82 C531.831,79.965 532.853,80.001 541,80.001 C549.148,80.001 550.169,79.965 553.369,79.82 C556.562,79.673 558.743,79.167 560.652,78.425 C562.623,77.658 564.297,76.634 565.965,74.965 C567.633,73.296 568.659,71.625 569.425,69.651 C570.167,67.743 570.674,65.562 570.82,62.369 C570.966,59.17 571,58.147 571,50 C571,41.851 570.966,40.831 570.82,37.631"></path></g></g></g></svg></div><div style="padding-top: 8px;"> <div style=" color:#3897f0; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:550; line-height:18px;">View this post on Instagram</div></div><div style="padding: 12.5% 0;"></div> <div style="display: flex; flex-direction: row; margin-bottom: 14px; align-items: center;"><div> <div style="background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(0px) translateY(7px);"></div> <div style="background-color: #F4F4F4; height: 12.5px; transform: rotate(-45deg) translateX(3px) translateY(1px); width: 12.5px; flex-grow: 0; margin-right: 14px; margin-left: 2px;"></div> <div style="background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(9px) translateY(-18px);"></div></div><div style="margin-left: 8px;"> <div style=" background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 20px; width: 20px;"></div> <div style=" width: 0; height: 0; border-top: 2px solid transparent; border-left: 6px solid #f4f4f4; border-bottom: 2px solid transparent; transform: translateX(16px) translateY(-4px) rotate(30deg)"></div></div><div style="margin-left: auto;"> <div style=" width: 0px; border-top: 8px solid #F4F4F4; border-right: 8px solid transparent; transform: translateY(16px);"></div> <div style=" background-color: #F4F4F4; flex-grow: 0; height: 12px; width: 16px; transform: translateY(-4px);"></div> <div style=" width: 0; height: 0; border-top: 8px solid #F4F4F4; border-left: 8px solid transparent; transform: translateY(-4px) translateX(8px);"></div></div></div> <div style="display: flex; flex-direction: column; flex-grow: 1; justify-content: center; margin-bottom: 24px;"> <div style=" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; margin-bottom: 6px; width: 224px;"></div> <div style=" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; width: 144px;"></div></div></a><p style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;"><a href="https://www.instagram.com/reel/DLaW8p1glzm/?utm_source=ig_embed&amp;utm_campaign=loading" style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none;" target="_blank">A post shared by Tribeca (@tribeca)</a></p></div></blockquote>`, type: "instagram"}]
  },
  { 
    id: 1, 
    title: 'Morning Light', 
    roleTitle: 'Creative Technologist/Score Composer',
    links: [{link: 'https://www.instagram.com/chachafestival/?hl=en', text: 'Cha Cha Fest Instagram'}, {link: 'https://interiordesign.net/designwire/highlights-from-new-yorks-cha-cha-festival/#:~:text=Oolong%20Tea%20House%3A%20Morning%20Light%20by%20Aaron%20Santiago%20%26%20Michaela%20Ternasky%2DHolland&text=Michaela%20Ternasky%2DHolland-,Oolong%20Tea%20House.,-Visual%20artists%20Aaron', text: 'Press from Interior Design Magazine'}],
    techUsed: 'Javascript, Tone.js, Socket.io, OpenAI GPT, Touchdesigner, Ableton',
    description: 'An immersive installation surrounding the ancient art of tea leaf reading. Participants place down their tea cup and are offered divine wisdom in return.', 
    details: "This installation was presented at the Cha Cha Festival in New York City that celebrates tea and its rituals. Within the WSA building, the installation was designed to create a meditative space where participants could seek guidance through the ritual of tea leaf reading. My role involved composing the score for the installation, and working closely with head Artist Aaron Santiago. I utilized Tone.js for the audio synthesis and Socket.io to handle real-time communication between the installation's components. We used OpenAI's GPT model to provide dynamic and personalized responses based on the tea leaves' patterns. which allowed for a seamless blend of audio and visual elements, enhancing the overall experience.",
    imageUrl: '/img/morningLight.jpg',
    gallery: [
      {original: "/img/ml2.jpg", type: "image"}, 
      {original: "/img/ml1.jpg", type: "image"}, 
      {original: "/img/ml3.jpg", type: "image"}, 
      {original: "/img/ml4.jpg", type: "image"},
     ],
    video: [{original: `/img/mlVideo.mov`, type: "video"}]
  },
  { 
    id: 2, 
    title: 'Under The Radar: A Room of One\'s Own', 
    roleTitle: 'Score Composer/Technical Director',
    links: [{link: "https://utrfest.org/program/a-room-of-ones-own/", text: "Under The Radar Festival"}],
    techUsed: 'Ableton, Touchdesigner, Live Mixing',
    description: "A room of one's own is an XR performance and wholly unique experience about making creative work within a confined space.", 
    details: `Through voice loops, motion capture, and audio-visual fragments in projected scenes, 
    the unnamed protagonist takes us through their adolescence as they navigate sickness, immigration, and a multilingual artistic career. 
    Reality and fiction bleed together in this playful and raw exploration of the joys and horrors of being trapped in one’s own creative brain. <br><br>
    This piece was presented at the Under The Radar Festival in New York City staring and created by my longtime friend and collaborator, Viola He. We worked together to build a soundscape and composition that reflected the playful gravity of the piece. 
    I worked as the Technical Director for the piece and the show Runway which also was shown at the festival, and was responsible for the live mixing of the piece.`,
    imageUrl: '/img/roomOfOnesOwn.jpg',
    gallery: [
      {original: "/img/room3.jpg", type: "image"}, 
      {original: "/img/room2.jpg", type: "image"}, 
      {original: "/img/room1.jpg", type: "image"}],
    video: [{original: "/img/room.mp4", type: "video"}]
  },
  { 
    id: 3, 
    title: 'Fras Fest', 
    roleTitle: 'Head Organizer/Creator',
    techUsed: 'Ableton, Lighting Design, Live Mixing',
    description: "A music festival showcasing amazing artists from across the northeastern music scene working alongside technical artists to create a one of a kind experience.", 
    details: `
    With over 30 artists involved this was the most ambitious live show I've ever been a part of. After organizing many shows around NYC and Brooklyn for about 3 years, I decided to take the leap and create my own festival. 
    Working with family friends who own a wedding venue in upstate NY, we were able to create a space that was truly unique and one of a kind. We built out an indoor and outdoor performance space that allowed for live projections, music, and a truly immersive experience. 
    <br><br>
    The festival was a huge success and not only were we able to showcase the amazing artists that attended, but we are confirmed to be back for 2026! Excited to make Fras Fest a yearly event and continue to present the best of the northeast's music scene.
    `,
    imageUrl: '/img/frasFest.jpg',
    links: [{link: "https://www.instagram.com/frasfest/", text: "Fras Fest Instagram"}, {link: "https://www.sassafrasruins.com/", text: "Our Venue"}],
    gallery: [
      {original: "/img/ff1.jpg", type: "image"}, 
      {original: "/img/ff2.jpg", type: "image"}, 
      {original: "/img/ff3.mov", type: "video"},
     ],
  },
  { 
    id: 4, 
    title: 'Please Wake Up Daddy', 
    roleTitle: 'Co-Creator',
    links: [{link: "https://pleasewakeupdaddy.com/", text: "Web Experience"}],
    techUsed: 'Javascript, Three.js, Web Audio API, Blender',
    description: 'An interactive installation that requires the audience to scream to wake up their sleeping father for a unique surprise.', 
    details: `
     We are currently building out this experience into a larger video game/immersive theater experience. The deeper experience will be presented at ONX Onassis this fall and will require the audience to inhabit a dejected recent college graduate fighting to figure out how to navigate their own isolation. There is also a website version of this experience that you can interact with now.
    `,
    imageUrl: '/img/wakeUpDaddy.jpg',
    gallery: [
      {original: "/img/pleasewakeupdaddy.png"}
     ],
  },
  { 
    id: 5, 
    title: 'Theater Royale', 
    roleTitle: 'Creative Technologist',
    techUsed: 'Javascript, Socket.io, OBS',
    links: [{link: "https://www.twitch.tv/theatreroyale", text: "Theater Royale Twitch" }, {link: "https://www.americantheatre.org/2025/03/07/game-plays-the-thing-for-new-fortnite-based-theatre-company/", text: "Press: American Theater"}],
    description: "It's both a theater company and an interactive livestream. Working with under Lincoln Center's resident Brandon Powers, we created a system to allow actors to play Fortnite while performing a play and stream on Twitch.", 
    details: `
    Two actors perform a play—currently in rotation are Waiting for Godot by Samuel Beckett, Antigone by Sophocles, and Love Letters by A. R. Gurney—while simultaneously playing the video game Fortnite. My role in this project
    was to create an overlay for the actors to be able to read the script while playing the game, and allow for a third party to be able to send messages to the actors during the show. We created a web app that acted as an overlay which scrolled through the script and displayed it on a screen in front of the actors while they played the game.
    `,
    imageUrl: '/img/theaterRoyal.jpg'
  },
  { 
    id: 6, 
    title: 'Dear Dancer', 
    roleTitle: 'Creative Technologist/Web Developer',
    techUsed: 'Javascript, Three.js, Blender, Chrome Extension Development',
    links: [{link: "https://www.deardancer.io/", text: "Dear Dancer Website"}, {link: "https://chromewebstore.google.com/detail/dear-dancer/hoajbihdcdmnmjlgkmlkecpcnkmokipb", text: "Chrome Extension"}],
    description: 'A web experience that allows the user to interact with a 3D dancer via typing. This functions both as a Chrome extension you can use across the web and an addition to the Dear Dancer website.', 
    details: `
    Each letter is uniquely mapped to a dance move which have all been performed, 3D modeled and mapped onto an avatar, and as the user types the words will be performed back at the user.
    <br><br>
    This project was a real challenge and taught me a lot about 3D modeling and animation. I also learned a lot about the complexities of working with 3D models in a web environment, specifically how to optimize them for the web and allow for a fully client side experience to avoid what could be maliciously used as a key tracker.
    `,
    imageUrl: '/img/dearDancer.png'
  },

  { 
    id: 8, 
    title: 'Tempo Turtle', 
    roleTitle: 'Co-Founder',
    links: [{link: "https://tempoturtle.com/", text: "Our Website"}, {link: "https://www.instagram.com/p/CSjx59LFC_U/", text: "Our Product"}],
    gallery: [
      {original: "/img/tt1.jpg", type: "image"}, 
      {original: "/img/tt2.jpg", type: "image"}, 
     ],
    techUsed: 'React, Three.js, Juce, C++',
    details: `
    Tempo Turtle is a company I started with my friend for our exploration of music technology both on the hardware and software side. We have created a couple of products and are currently working on creating a couple open-source software effects.
    <br><br>
    The first product we created is called the Brad Pad. It is a hardware device designed for music production with a form factor that allows you to hold the device in your hands.
    <br><br>
    We are currently working on a software effect that allows you to use a large turtle dial to control the speed of your playback. We are focused on creating intuitive and easy to use music production tools that are accessible to everyone.
    `,
    description: 'A company I started with my friend for our exploration of music technology both on the hardware and software side. We have created a couple of products and are currently working on creating a couple open-source software effects.', 
    imageUrl: '/img/tempoTurtle.jpg'
  },
];

const discarded =  [{ 
    id: 7, 
    title: 'To Start in the Dark', 
    techUsed: 'Ableton, Accelerometers, Max For Live',
    description: 'A live performance/Interactive installation that explored movement based control of music. The goal was to create an understandable system that could be explored much like coming into contact with a new instrument or an unfamiliar way to express yourself that can be easily explored.', 
    imageUrl: '/img/toStartInTheDark.jpg'
  },   {
        id: -2,
        title: 'We Have No Need of Other Worlds (We Need Mirrors)',
        roleTitle: 'Technical Director',
        techUsed: 'Ableton, Resolume, LED Pulse, LED Matrix, Touchdesigner, Live A/V Mixing Engineering, Omnidirectional Audio',
        links: [{link: "https://utrfest.org/program/we-have-no-need-of-other-worlds-we-need-mirrors/", text: "Under The Radar Festival"}],
        description: 'A performance that explores the theme of mirrors and how they can be used to reflect the world around us.',
        details: 'This performance was presented at the Under The Radar Festival in New York City. The performance was a collaboration between the artist and the technical director. The technical director was responsible for the technical aspects of the performance, including the lighting, sound, and video. The artist was responsible for the artistic aspects of the performance, including the story and the characters.',
        imageUrl: '/img/mirrors.jpg',
    }]
---

<div id="projects" class="projects-container">
    <h2>Projects</h2>
    <div class="projects-grid">
        {projects.map((project) => (
            <div 
                data-project-trigger={project.id}
                id={`project-${project.id}`}
                class="project-card"
                data-project-id={project.id}
            >
                <img 
                    style="border-radius: 8px;"
                    src={project.imageUrl} 
                    alt={project.title} 
                    class="project-image"
                    data-project-trigger={project.id}
                />
                
                <div class="project-text">
                    <h3 data-project-trigger={project.id}>{project.title}</h3>
                    <h5>{project.roleTitle}</h5>
                    <p>{project.description}</p>
                </div>
            </div>
        ))}
    </div>
</div>

<!-- Modal for project details -->
<div id="project-modal" class="modal-overlay">
    <div class="modal-content">
        <button class="modal-close" id="modal-close">&times;</button>
        <div class="modal-body">
                <h2 id="modal-title"></h2>
                <div class="modal-top-info">
                    <div>
                        <h4 id="modal-role"></h4>
                        <div id="modal-tech" class="modal-tech"></div>
                    </div>
                    <div>
                        <h4>Description</h4>
                        <p id="modal-description"></p>
                    </div>
                    <div>
                        <h4>Links</h4>
                        <div id="modal-links" class="modal-links"></div>
                    </div>
                </div>
                <div id="modal-gallery" class="modal-gallery">
                    <!-- Gallery images will be inserted here -->
                </div>
                <h2>Overview</h2>
                <div id="modal-details" class="modal-details">
                    <!-- Detailed description will be inserted here -->
                </div>
                <div id="modal-video" class="modal-video">
                    <!-- Video will be inserted here -->
                </div>
            
        </div>
    </div>
</div>

<style>
    .projects-container {
        padding: 20px;
        max-width: 1500px;
        margin: 0 auto;
        text-align: left;
    }

    h2 {
        font-size: 2rem;
        margin-bottom: 20px;
    }

    .project-card {
        transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        overflow: hidden;
        padding: 20px;
        border-radius: 8px;
        width: 100%;
        text-align: left;
        cursor: pointer;
        color: black;
    }

    :global(.dark) .project-card {
        color: white;
    }

    .project-card:hover {
        transform: translateY(-10px);
        box-shadow: 
            0 10px 25px rgba(0, 0, 0, 0.15),
            0 20px 40px rgba(0, 0, 0, 0.08),
            0 0 0 1px rgba(0, 0, 0, 0.05);
    }

    :global(.dark) .project-card:hover {
        box-shadow: 
            0 10px 25px rgba(255, 255, 255, 0.2),
            0 20px 40px rgba(255, 255, 255, 0.1),
            0 0 0 1px rgba(255, 255, 255, 0.1);
    }

    .projects-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        column-gap: 50px;
        row-gap: 30px;
        justify-items: center;
    }

    .project-card h3 {
        font-size: 1.5rem;
        margin-bottom: 10px;
    }

    .project-card p {
        font-size: 1rem;
    }

    .project-image {
        width: 100%;
        height: auto;
        border-radius: 8px;
        margin-bottom: 15px;
    }

    .project-text {
        margin-top: 10px;
    }

    /* Modal Styles */
    .modal-overlay {
        display: flex;
        opacity: 0;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        z-index: 1000;
        pointer-events: none;
        backdrop-filter: blur(5px);
    }

    .modal-overlay.active {
        opacity: 1;
        transition: opacity 0.5s ease;
        justify-content: center;
        align-items: center;
        pointer-events: auto;
    }

    .modal-content {
        background: white;
        border-radius: 12px;
        width: 90%;
        max-width: 1200px;
        max-height: 90%;
        overflow-y: scroll;
        position: relative;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
    }

    /* Custom scrollbar for modal content */
    .modal-content::-webkit-scrollbar {
        width: 8px;
    }

    .modal-content::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.05);
        border-radius: 6px;
        margin: 12px 4px;
    }

    .modal-content::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.2);
        border-radius: 6px;
        border: 1px solid transparent;
        background-clip: content-box;
    }

    .modal-content::-webkit-scrollbar-thumb:hover {
        background: rgba(0, 0, 0, 0.4);
        background-clip: content-box;
    }

    :global(.dark) .modal-content::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 6px;
        margin: 12px 4px;
    }

    :global(.dark) .modal-content::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 6px;
        border: 1px solid transparent;
        background-clip: content-box;
    }

    :global(.dark) .modal-content::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.4);
        background-clip: content-box;
    }

    :global(.dark) .modal-content {
        background: black;
        box-shadow: 0 0 10px 0 rgba(256, 256, 256, 0.5);
        color: white;
    }

    .modal-close {
        position: absolute;
        top: 20px;
        right: 25px;
        background: none;
        border: none;
        font-size: 2rem;
        cursor: pointer;
        color: #666;
        z-index: 1001;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: all 0.3s ease;
    }

    .modal-close:hover {
        background: rgba(0, 0, 0, 0.1);
        color: #333;
    }

    :global(.dark) .modal-close {
        color: #ccc;
    }

    :global(.dark) .modal-close:hover {
        background: rgba(255, 255, 255, 0.1);
        color: white;
    }

    .modal-body {
        height: 100%;
        max-height: 80vh;
        margin-left: 20px;
        margin-right: 20px;
    }


    .modal-left {
        padding: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #f8f9fa;
    }

    :global(.dark) .modal-left {
        background: #2a2a2a;
    }

    .modal-right {
        padding: 40px;
        overflow-y: auto;
    }

    .modal-right h2 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 2rem;
    }

    .modal-right h4 {
        color: #666;
        margin-bottom: 20px;
        font-weight: normal;
    }

    :global(.dark) .modal-right h4 {
        color: #ccc;
    }

    .modal-tech {
        margin-bottom: 20px;
    }

    .modal-tech h5 {
        margin-bottom: 5px;
        color: #333;
    }

    .modal-top-info {
        display: flex;
        justify-content: space-between;
        align-items: left;
    }

    .modal-top-info > * {
        width: 50%;
        padding-right: 35px;
    }

    @media (max-width: 768px) {
        :global(.modal-top-info) {
            flex-direction: column;
        }

        :global(.modal-top-info > *) {
            width: 100% !important;
            padding-right: 0 !important;
        }

        :global(.image-gallery img),
        :global(.image-gallery video),
        :global(.modal-video-media) {
            max-width: 80vw !important;
            width: 100% !important;
        }

    
    }

    :global(.dark) .modal-tech h5 {
        color: #ddd;
    }

    .modal-links {
        margin-bottom: 20px;
    }

    .modal-links h5 {
        margin-bottom: 10px;
        color: #333;
    }

    :global(.dark) .modal-links h5 {
        color: #ddd;
    }

    .modal-links ul {
        margin: 0;
        padding-left: 20px;
    }

    :global(.modal-links a) {
        color: black !important;
        transition: color 0.3s;
    }

    :global(.modal-links a:hover) {
        color: #0056b3 !important;
    }

    :global(.dark) :global(.modal-links a) {
        color: white !important;
    }

    :global(.dark) :global(.modal-links a:hover) {
        color: #99ccff !important;
    }

    :global(.modal-details) {
        margin-top: 20px;
        font-size: 1.1rem;
        line-height: 1.6;
        padding-bottom: 20px;
    }

    /* Modal Gallery styles */
    .modal-gallery {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    :global(.modal-video) {
        padding-bottom: 20px;
    }

    :global(.modal-video video),
    :global(.modal-video blockquote),
    :global(.modal-video iframe) {
        max-width: 100% !important;
        margin-top: 20px;
        margin-bottom: 40px;
        padding-top: 20px;
        position: relative;
        width: 100%;
        display: flex;
        flex-direction: column;
        width: 100%;
        align-items: center;
    }

    :global(.modal-gallery .image-gallery) {
        padding-top: 20px;
        position: relative;
        width: 100%;
        display: flex;
        flex-direction: column;
        width: 100%;
        align-items: center;
    }

    .modal-gallery .gallery-media,
    #modal-gallery .gallery-media {
        width: 80%;
        height: auto;
        border-radius: 8px;
        max-height: 60vh;
        object-fit: contain;
        margin: 0 auto;
        display: block;
    }

    /* Specific styles for videos */
    .modal-gallery .gallery-video,
    #modal-gallery .gallery-video {
        background: black;
    }

    /* If media height exceeds 50vh, reduce width to maintain better proportions */
    @media (max-height: 800px) {
        .modal-gallery .gallery-media,
        #modal-gallery .gallery-media {
            width: 70%;
        }
    }

    @media (max-height: 600px) {
        .modal-gallery .gallery-media,
        #modal-gallery .gallery-media {
            width: 60%;
        }
    }

    /* For very tall media (portrait orientation), reduce width */
    .modal-gallery .gallery-media.tall-image,
    #modal-gallery .gallery-media.tall-image {
        width: 60%;
    }

    /* For extremely tall media, reduce width even more */
    .modal-gallery .gallery-media.very-tall-image,
    #modal-gallery .gallery-media.very-tall-image {
        width: 50%;
    }

    :global(.modal-gallery .gallery-controls),
    :global(#modal-gallery .gallery-controls) {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 20px;
        margin-top: 15px;
    }

    :global(.modal-gallery .gallery-prev),
    :global(.modal-gallery .gallery-next),
    :global(#modal-gallery .gallery-prev),
    :global(#modal-gallery .gallery-next) {
        background: rgba(0, 0, 0, 0.6);
        color: white;
        border: none;
        border-radius: 50%;
        width: 45px;
        height: 45px;
        cursor: pointer;
        font-size: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
    }

    #modal-description {
        padding-right: 35px;
    }

    :global(.modal-gallery .gallery-prev:hover), 
    :global(.modal-gallery .gallery-next:hover),
    :global(#modal-gallery .gallery-prev:hover),
    :global(#modal-gallery .gallery-next:hover) {
        background: rgba(0, 0, 0, 0.8);
        transform: scale(1.1);
    }

    :global(.modal-gallery .gallery-counter),
    :global(#modal-gallery .gallery-counter) {
        color: #333;
        font-size: 16px;
        font-weight: 500;
    }

    :global(.dark) :global(.modal-gallery .gallery-counter),
    :global(.dark) :global(#modal-gallery .gallery-counter) {
        color: #ddd;
    }

    @media (max-width: 768px) {
        .projects-container {
            padding: 0;
        }

        .projects-grid {
            display: block;
        }

        .modal-content {
            width: 95%;
            max-height: 95%;
        }

        .modal-left {
            padding: 20px;
        }

        .modal-right {
            padding: 20px;
            max-height: 40vh;
        }

        .modal-gallery .gallery-media,
        #modal-gallery .gallery-media {
            max-height: 40vh;
            width: 90%;
        }

        /* For mobile, if the viewport is very short, reduce width further */
        @media (max-height: 500px) {
            .modal-gallery .gallery-media,
            #modal-gallery .gallery-media {
                width: 70%;
            }
        }

        .modal-close {
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            width: 35px;
            height: 35px;
        }
    }
</style>

<script define:vars={{ projects }}>
    console.log(projects);
    let currentGalleryIndex = {};
    
    const checkImageAspectRatio = (img) => {
        // Wait for image to load completely
        if (img.complete && img.naturalHeight !== 0) {
            const aspectRatio = img.naturalWidth / img.naturalHeight;
            
            // If aspect ratio is less than 1, it's a portrait image
            // If aspect ratio is less than 0.7, it's a very tall portrait image
            if (aspectRatio < 0.7) {
                img.classList.add('very-tall-image');
            } else if (aspectRatio < 1) {
                img.classList.add('tall-image');
            }
            
            // Also check if the image height would be too large relative to viewport
            const viewportHeight = window.innerHeight;
            const maxAllowedHeight = viewportHeight * 0.6; // 60vh
            
            if (img.naturalHeight > maxAllowedHeight && aspectRatio < 1.2) {
                if (!img.classList.contains('very-tall-image')) {
                    img.classList.add('tall-image');
                }
            }
        }
    }

    const checkVideoAspectRatio = (video) => {
        // Wait for video metadata to load completely
        if (video.readyState >= 1) { // HAVE_METADATA
            const aspectRatio = video.videoWidth / video.videoHeight;
            
            // If aspect ratio is less than 1, it's a portrait video
            // If aspect ratio is less than 0.7, it's a very tall portrait video
            if (aspectRatio < 0.7) {
                video.classList.add('very-tall-image');
            } else if (aspectRatio < 1) {
                video.classList.add('tall-image');
            }
            
            // Also check if the video height would be too large relative to viewport
            const viewportHeight = window.innerHeight;
            const maxAllowedHeight = viewportHeight * 0.6; // 60vh
            
            if (video.videoHeight > maxAllowedHeight && aspectRatio < 1.2) {
                if (!video.classList.contains('very-tall-image')) {
                    video.classList.add('tall-image');
                }
            }
        }
    }

    window.checkImageAspectRatio = checkImageAspectRatio;
    window.checkVideoAspectRatio = checkVideoAspectRatio;
    
    function openModal(projectId) {
        const project = projects.find(p => p.id === projectId);
        if (!project) return;
        
        const modal = document.getElementById('project-modal');
        if (!modal) return;
        
        // Populate modal content
        const modalTitle = document.getElementById('modal-title');
        const modalRole = document.getElementById('modal-role');
        const modalDescription = document.getElementById('modal-description');
        
        if (modalTitle) modalTitle.textContent = project.title;
        if (modalRole) modalRole.textContent = project.roleTitle || '';
        if (modalDescription) modalDescription.textContent = project.description;
        
        // Tech stack
        const modalTech = document.getElementById('modal-tech');
        if (modalTech) {
            if (project.techUsed) {
                modalTech.innerHTML = `<h5>Tools: ${project.techUsed}</h5>`;
                modalTech.style.display = 'block';
            } else {
                modalTech.style.display = 'none';
            }
        }
        
        // Links
        const modalLinks = document.getElementById('modal-links');
        if (modalLinks) {
            if (project.links && project.links.length > 0) {
                const linksHtml = `
                    <ul>
                        ${project.links.map(link => 
                            `<li><a href="${link.link}" target="_blank" rel="noopener noreferrer">${link.text}</a></li>`
                        ).join('')}
                    </ul>
                `;
                modalLinks.innerHTML = linksHtml;
                modalLinks.style.display = 'block';
            } else {
                modalLinks.style.display = 'none';
            }
        }
        
        // Details
        const modalDetails = document.getElementById('modal-details');
        if (modalDetails) {
            if (project.details) {
                modalDetails.innerHTML = `<p>${project.details}</p>`;
                modalDetails.style.display = 'block';
            } else {
                modalDetails.style.display = 'none';
            }
        }

        // Video
        const modalVideo = document.getElementById('modal-video');
        if (modalVideo) {
            if (project.video && project.video.length > 0) {
                if (project.video[0].type === 'video') {
                    modalVideo.innerHTML = `<video src="${project.video[0].original}" controls class="modal-video-media"></video>`;
                    modalVideo.style.display = 'block';
                } else if (project.video[0].type === 'instagram') {
                    modalVideo.innerHTML = project.video[0].original;
                    modalVideo.style.display = 'block';
                    
                    // Load Instagram embed script if not already loaded
                    if (!window.instgrm) {
                        const script = document.createElement('script');
                        script.async = true;
                        script.src = '//www.instagram.com/embed.js';
                        document.head.appendChild(script);
                        
                        script.onload = function() {
                            if (window.instgrm && window.instgrm.Embeds) {
                                window.instgrm.Embeds.process();
                            }
                        };
                    } else {
                        // Instagram script already loaded, just process embeds
                        setTimeout(() => {
                            if (window.instgrm && window.instgrm.Embeds) {
                                window.instgrm.Embeds.process();
                            }
                        }, 100);
                    }
                }
            } else {
                modalVideo.style.display = 'none';
            }
        }
        
        // Gallery
        const modalGallery = document.getElementById('modal-gallery');
        if (modalGallery) {
            if (project.gallery && project.gallery.length > 0) {
                currentGalleryIndex[projectId] = 0;
                const galleryHtml = `
                    <div class="image-gallery">
                        ${project.gallery.map((media, index) => {
                            const mediaType = media.type || 'image';
                            const displayStyle = index === 0 ? 'display: block; border-radius: 8px; max-width: 80%;' : 'display: none; border-radius: 8px; max-width: 80%;';
                            
                            if (mediaType === 'video') {
                                return `<video 
                                    src="${media.original}" 
                                    class="gallery-media gallery-video"
                                    style="${displayStyle}"
                                    data-gallery="${projectId}"
                                    data-index="${index}"
                                    controls
                                    muted
                                    preload="metadata"
                                    onloadedmetadata="checkVideoAspectRatio(this)"
                                >
                                    Your browser does not support the video tag.
                                </video>`;
                            } else {
                                return `<img 
                                    src="${media.original}" 
                                    alt="${project.title} gallery ${index + 1}"
                                    class="gallery-media gallery-image"
                                    style="${displayStyle}"
                                    data-gallery="${projectId}"
                                    data-index="${index}"
                                    onload="checkImageAspectRatio(this)"
                                />`;
                            }
                        }).join('')}
                        ${project.gallery.length > 1 ? `
                            <div class="gallery-controls">
                                <button class="gallery-prev" data-gallery="${projectId}">‹</button>
                                <span class="gallery-counter">
                                    <span class="gallery-current">1</span> / ${project.gallery.length}
                                </span>
                                <button class="gallery-next" data-gallery="${projectId}">›</button>
                            </div>
                        ` : ''}
                    </div>
                `;
                modalGallery.innerHTML = galleryHtml;
                
                // Debug: Log the created elements
                console.log('Gallery HTML created:', galleryHtml);
                console.log('Gallery controls found:', modalGallery.querySelector('.gallery-controls'));
                console.log('Gallery buttons found:', modalGallery.querySelectorAll('.gallery-prev, .gallery-next'));
                
                // Add gallery event listeners
                if (project.gallery.length > 1) {
                    const prevBtn = modalGallery.querySelector('.gallery-prev');
                    const nextBtn = modalGallery.querySelector('.gallery-next');
                    
                    if (prevBtn) {
                        prevBtn.addEventListener('click', (e) => {
                            e.stopPropagation();
                            navigateGallery(projectId, -1);
                        });
                    }
                    
                    if (nextBtn) {
                        nextBtn.addEventListener('click', (e) => {
                            e.stopPropagation();
                            navigateGallery(projectId, 1);
                        });
                    }
                }
            } else {
                // Show main project image if no gallery
                modalGallery.innerHTML = `
                    <div class="image-gallery">
                        <img src="${project.imageUrl}" alt="${project.title}" class="gallery-media gallery-image" style="display: block;" onload="checkImageAspectRatio(this)" />
                    </div>
                `;
            }
        }
        
        // Show modal
        modal.classList.add('active');
        document.body.style.overflow = 'hidden'; // Prevent background scroll
    }
    
    function closeModal() {
        const modal = document.getElementById('project-modal');
        if (modal) {
            // Pause all videos in the modal before closing
            const videos = modal.querySelectorAll('video');
            videos.forEach(video => {
                video.pause();
                video.currentTime = 0; // Optional: reset to beginning
            });
            
            // Scroll modal content to top
            const modalContent = modal.querySelector('.modal-content');
            if (modalContent) {
                modalContent.scrollTop = 0;
            }
            
            modal.classList.remove('active');
            document.body.style.overflow = ''; // Restore background scroll
        }
    }
    
    function navigateGallery(galleryId, direction) {
        const project = projects.find(p => p.id === galleryId);
        if (!project || !project.gallery) return;
        
        const totalImages = project.gallery.length;
        let newIndex = currentGalleryIndex[galleryId] + direction;
        
        if (newIndex < 0) newIndex = totalImages - 1;
        if (newIndex >= totalImages) newIndex = 0;
        
        currentGalleryIndex[galleryId] = newIndex;
        
        // Hide all media items (images and videos)
        const mediaItems = document.querySelectorAll(`[data-gallery="${galleryId}"]`);
        mediaItems.forEach(media => {
            if (media.classList.contains('gallery-media')) {
                media.style.display = 'none';
                // Pause videos when hiding them
                if (media.tagName === 'VIDEO') {
                    media.pause();
                }
            }
        });
        
        // Show the new media item
        const newMedia = document.querySelector(`[data-gallery="${galleryId}"][data-index="${newIndex}"]`);
        if (newMedia) {
            newMedia.style.display = 'block';
        }
        
        // Update counter
        const counter = document.querySelector('.gallery-current');
        if (counter) {
            counter.textContent = (newIndex + 1).toString();
        }
    }
    
    // Initialize when DOM is ready
    document.addEventListener('DOMContentLoaded', () => {
        // Add click event listeners to project triggers
        document.querySelectorAll('[data-project-trigger]').forEach(trigger => {
            trigger.addEventListener('click', () => {
                const projectIdStr = trigger.getAttribute('data-project-trigger');
                if (projectIdStr) {
                    const projectId = parseInt(projectIdStr);
                    openModal(projectId);
                }
            });
        });
        
        // Close modal events
        const modalClose = document.getElementById('modal-close');
        const modalOverlay = document.getElementById('project-modal');
        
        if (modalClose) {
            modalClose.addEventListener('click', closeModal);
        }
        
        if (modalOverlay) {
            modalOverlay.addEventListener('click', (e) => {
                if (e.target === modalOverlay) {
                    closeModal();
                }
            });
        }
        
        // Escape key to close modal
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
            }
        });
    });
</script>
